<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Valentine Quest ğŸ’˜</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;height:100vh;
  background:linear-gradient(135deg,#ff758c,#ff7eb3);
  font-family:'Comic Sans MS','Poppins',sans-serif;
  display:flex;justify-content:center;align-items:center;
  overflow:hidden;
}

.card{
  background:#fff;padding:25px;border-radius:25px;
  width:90%;max-width:380px;text-align:center;
  box-shadow:0 20px 40px rgba(0,0,0,.25);
  animation:pop .4s ease;
}

@keyframes pop{from{transform:scale(.7);opacity:0}to{transform:scale(1);opacity:1}}

.progress-wrap{margin-bottom:15px}
.progress-text{font-size:16px;margin-bottom:6px}
.progress-bar{height:12px;background:#eee;border-radius:10px;overflow:hidden}
.progress-fill{height:100%;background:#ff3f6c;transition:.4s}

h1{color:#ff3f6c}
p{font-size:18px;color:#444}

.buttons{margin-top:20px;position:relative;height:220px}

button{
  padding:12px 22px;border:none;border-radius:30px;
  font-size:18px;cursor:pointer;position:absolute;
}

#yes{
  background:#ff3f6c;color:#fff;
  transition:left .6s ease, top .6s ease, opacity .3s ease;
}
#no{
  background:#ccc;color:#333;
  left:50%;top:80px;transform:translateX(-50%);
}

.fake{background:#ddd;color:#666}

.angry{
  background:red!important;color:#fff!important;
  animation:shake .3s infinite;
}
@keyframes shake{
  0%{transform:translateX(-50%)}
  50%{transform:translateX(-52%)}
}

.blow{animation:fly .7s forwards}
@keyframes fly{
  to{transform:translate(300px,-300px) rotate(720deg);opacity:0}
}

.heart{
  position:fixed;bottom:0;font-size:24px;
  animation:float 4s linear infinite;
}
@keyframes float{
  to{transform:translateY(-100vh);opacity:0}
}
</style>
</head>
<body>

<div class="card" id="card"></div>

<script>
/* ğŸ”Š SOUND */
const audio=new (window.AudioContext||window.webkitAudioContext)();
const play=(f,t="sine",d=.12,v=.2)=>{
  const o=audio.createOscillator(),g=audio.createGain();
  o.type=t;o.frequency.value=f;g.gain.value=v;
  o.connect(g);g.connect(audio.destination);
  o.start();o.stop(audio.currentTime+d);
};
const yesSound=()=>play(900,"triangle",.2,.25);
const missSound=()=>play(250,"square",.05,.15);
const angrySound=()=>play(120,"sawtooth",.4,.3);
const boomSound=()=>play(60,"sawtooth",.6,.4);

/* ğŸ“± VIBRATION */
const vibrate=p=>navigator.vibrate && navigator.vibrate(p);

/* GAME STATE */
let step=-1,noExploded=false,finalNoClicks=0;
let seekHits=0,moveInterval;
const card=document.getElementById("card");

const steps=[
 {t:"Question 1 ğŸ¤”",q:"Do you think Iâ€™m kinda cute?",y:"Obviously ğŸ˜Œ",n:"Nope"},
 {t:"Serious Question ğŸš¨",q:"Should we go on a Valentineâ€™s date?",y:"YES ğŸ˜",n:"NO ğŸ˜¤"},
 {t:"Final Question ğŸ’–",q:"Will you be my Valentine? ğŸŒ¹",y:"YES FOREVER ğŸ’˜",n:"No ğŸ˜"}
];

const progress=()=>`
<div class="progress-wrap">
  <div class="progress-text">Mood: ${["ğŸ˜","ğŸ™‚","ğŸ˜Š","ğŸ˜","ğŸ’–"][step+1]}</div>
  <div class="progress-bar">
    <div class="progress-fill" style="width:${((step+1)/steps.length)*100}%"></div>
  </div>
</div>`;

/* ğŸ˜ˆ HARD HIDE & SEEK */
function hideAndSeek(){
  card.innerHTML=`
    <h1>HeHeHeğŸ˜ˆ</h1>
    <p>Catch the REAL <b>YES</b> 3 times</p>
    <p>Progress: ${seekHits}/3 ğŸ¯</p>
    <div class="buttons" id="arena"></div>
  `;

  const arena=document.getElementById("arena");

  const real=document.createElement("button");
  real.id="yes";
  real.innerText="YES ğŸ˜„";
  arena.appendChild(real);

  const fakes=[];
  for(let i=0;i<5;i++){
    const f=document.createElement("button");
    f.className="fake";
    f.innerText="YES";
    f.onclick=()=>{
      missSound(); vibrate(80);
      f.innerText="WRONG ğŸ˜œ";
    };
    arena.appendChild(f);
    fakes.push(f);
  }

  [...arena.children].forEach(b=>{
    b.style.left=Math.random()*260+"px";
    b.style.top=Math.random()*150+"px";
  });

  let fx=0,fy=0,frozen=false;
  document.onmousemove=e=>{fx=e.clientX;fy=e.clientY};
  document.ontouchmove=e=>{
    fx=e.touches[0].clientX;
    fy=e.touches[0].clientY;
  };

  moveInterval=setInterval(()=>{
    if(!frozen && Math.random()<0.25){
      frozen=true;
      real.style.opacity=1;
      setTimeout(()=>{
        real.style.left=Math.random()*260+"px";
        real.style.top=Math.random()*150+"px";
        real.style.opacity=Math.random()>.6?.4:1;
        frozen=false;
      },600);
    }else if(!frozen){
      real.style.left=Math.random()*260+"px";
      real.style.top=Math.random()*150+"px";
      real.style.opacity=Math.random()>.7?.4:1;
    }

    fakes.forEach(f=>{
      const r=f.getBoundingClientRect();
      f.style.left=r.left+(fx-r.left)*0.06+"px";
      f.style.top=r.top+(fy-r.top)*0.06+"px";
    });
  },1000);

  real.onclick=()=>{
    yesSound(); vibrate(40);
    seekHits++; clearInterval(moveInterval);
    seekHits>=3?(step=0,render()):hideAndSeek();
  };
}

/* MAIN GAME */
function render(){
  card.innerHTML=`
    ${progress()}
    <h1>${steps[step].t}</h1>
    <p>${steps[step].q}</p>
    <div class="buttons">
      <button id="yes">${steps[step].y}</button>
      <button id="no">${steps[step].n}</button>
    </div>
  `;

  document.getElementById("yes").onclick=()=>{
    yesSound();
    step++; step<steps.length?render():finish();
  };

  const no=document.getElementById("no");

  if(step===1 && !noExploded){
    no.onclick=()=>{
      angrySound();
      no.classList.add("angry");
      no.innerText="HOW DARE YOU ğŸ˜¡";
      setTimeout(()=>{
        boomSound();
        no.remove();
        noExploded=true;
        render();
      },700);
    };
  }

  if(step===2){
    no.onclick=()=>{
      finalNoClicks++;
      if(finalNoClicks>3){
        boomSound();
        no.classList.add("blow");
        setTimeout(()=>no.remove(),600);
      }
    };
  }
}

function finish(){
  card.innerHTML=`
    <h1>YAYYYY ğŸ˜ğŸ‰</h1>
    <p>You survived everything ğŸ˜</p>
    <p>Happy Valentineâ€™s ğŸ’˜</p>
  `;
  setInterval(()=>{
    const h=document.createElement("div");
    h.className="heart";
    h.innerText="ğŸ’–";
    h.style.left=Math.random()*100+"vw";
    document.body.appendChild(h);
    setTimeout(()=>h.remove(),4000);
  },300);
}

hideAndSeek();
</script>
</body>
</html>
